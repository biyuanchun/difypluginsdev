identity:
  author: beersoccer
  name: mem0ai
  label:
    en_US: mem0ai
    zh_Hans: mem0ai
  description:
    en_US: mem0ai plugin, local-only mode, async_mode enabled by default.
    zh_Hans: mem0ai 插件，仅本地模式，async_mode 默认开启。
  icon: mem0_plugin.png
  tags:
    - utilities
credentials_for_provider:
  async_mode:
    type: boolean
    required: false
    default: true
    label:
      en_US: Async Mode
      zh_Hans: 异步模式
    help:
      en_US: "When async mode is enabled, all Mem0 operations run asynchronously and concurrently. Search waits for results; Add does not."
      zh_Hans: "开启异步模式后，所有Mem0的操作都异步并发执行，Search操作会等待返回结果而Add操作不会。"
  
  # ========== LLM Configuration ==========
  llm_provider:
    type: text-input
    required: true
    default: "azure_openai"
    label:
      en_US: LLM Provider
      zh_Hans: LLM 提供商
    placeholder:
      en_US: "e.g., azure_openai, openai, anthropic"
      zh_Hans: "例如：azure_openai, openai, anthropic"
    help:
      en_US: "Recommended: azure_openai. Also supports: openai, anthropic, etc."
      zh_Hans: "推荐：azure_openai。也支持：openai, anthropic 等。"
  llm_model:
    type: text-input
    required: true
    label:
      en_US: LLM Model
      zh_Hans: LLM 模型
    placeholder:
      en_US: "e.g., gpt-4o-mini"
      zh_Hans: "例如：gpt-4o-mini"
  llm_api_key:
    type: secret-input
    required: false
    label:
      en_US: LLM API Key
      zh_Hans: LLM API 密钥
    placeholder:
      en_US: "Required for OpenAI/Azure OpenAI. Leave empty for local providers."
      zh_Hans: "OpenAI/Azure OpenAI 需要。本地提供商可留空。"
    help:
      en_US: "Required when LLM Provider is 'openai' or 'azure_openai'. Not needed for 'anthropic'."
      zh_Hans: "当 LLM 提供商为 'openai' 或 'azure_openai' 时需要。'anthropic' 不需要。"
  llm_azure_endpoint:
    type: text-input
    required: false
    label:
      en_US: Azure Endpoint
      zh_Hans: Azure 端点
    placeholder:
      en_US: "https://your-resource.openai.azure.com"
      zh_Hans: "https://your-resource.openai.azure.com"
    help:
      en_US: "Only required when LLM Provider is 'azure_openai'. Leave empty for other providers."
      zh_Hans: "仅在 LLM 提供商为 'azure_openai' 时需要。其他提供商可留空。"
  llm_azure_deployment:
    type: text-input
    required: false
    label:
      en_US: Azure Deployment Name
      zh_Hans: Azure 部署名称
    help:
      en_US: "Only required when LLM Provider is 'azure_openai'. Leave empty for other providers."
      zh_Hans: "仅在 LLM 提供商为 'azure_openai' 时需要。其他提供商可留空。"
  llm_temperature:
    type: text-input
    required: false
    default: "0.1"
    label:
      en_US: LLM Temperature
      zh_Hans: LLM 温度参数
  llm_max_tokens:
    type: text-input
    required: false
    default: "256"
    label:
      en_US: LLM Max Tokens
      zh_Hans: LLM 最大 Token 数
  
  # ========== Embedder Configuration ==========
  embedder_provider:
    type: text-input
    required: true
    label:
      en_US: Embedder Provider
      zh_Hans: 向量模型提供商
    placeholder:
      en_US: "e.g., openai, azure_openai, huggingface"
      zh_Hans: "例如：openai, azure_openai, huggingface"
  embedder_model:
    type: text-input
    required: true
    label:
      en_US: Embedder Model
      zh_Hans: 向量模型
    placeholder:
      en_US: "e.g., text-embedding-3-small, multi-qa-MiniLM-L6-cos-v1"
      zh_Hans: "例如：text-embedding-3-small, multi-qa-MiniLM-L6-cos-v1"
  embedder_api_key:
    type: secret-input
    required: false
    label:
      en_US: Embedder API Key
      zh_Hans: 向量模型 API 密钥
    placeholder:
      en_US: "Required for OpenAI/Azure OpenAI. Leave empty for local providers."
      zh_Hans: "OpenAI/Azure OpenAI 需要。本地提供商可留空。"
    help:
      en_US: "Required when Embedder Provider is 'openai' or 'azure_openai'. Not needed for 'huggingface'."
      zh_Hans: "当向量模型提供商为 'openai' 或 'azure_openai' 时需要。'huggingface' 不需要。"
  embedder_azure_endpoint:
    type: text-input
    required: false
    label:
      en_US: Embedder Azure Endpoint
      zh_Hans: 向量模型 Azure 端点
    placeholder:
      en_US: "https://your-resource.openai.azure.com"
      zh_Hans: "https://your-resource.openai.azure.com"
    help:
      en_US: "Only required when Embedder Provider is 'azure_openai'. Leave empty for other providers."
      zh_Hans: "仅在向量模型提供商为 'azure_openai' 时需要。其他提供商可留空。"
  embedder_azure_deployment:
    type: text-input
    required: false
    label:
      en_US: Embedder Azure Deployment
      zh_Hans: 向量模型 Azure 部署
    help:
      en_US: "Only required when Embedder Provider is 'azure_openai'. Leave empty for other providers."
      zh_Hans: "仅在向量模型提供商为 'azure_openai' 时需要。其他提供商可留空。"
  
  # ========== Vector Database Configuration ==========
  vector_db_provider:
    type: text-input
    required: true
    default: "pgvector"
    label:
      en_US: Vector Database Provider
      zh_Hans: 向量数据库提供商
    placeholder:
      en_US: "pgvector"
      zh_Hans: "pgvector"
  vector_db_host:
    type: text-input
    required: true
    label:
      en_US: Database Host
      zh_Hans: 数据库主机
    placeholder:
      en_US: "localhost"
      zh_Hans: "localhost"
  vector_db_port:
    type: text-input
    required: false
    default: "5432"
    label:
      en_US: Database Port
      zh_Hans: 数据库端口
  vector_db_name:
    type: text-input
    required: true
    label:
      en_US: Database Name
      zh_Hans: 数据库名称
    placeholder:
      en_US: "mem0_vectors"
      zh_Hans: "mem0_vectors"
  vector_db_user:
    type: text-input
    required: true
    label:
      en_US: Database User
      zh_Hans: 数据库用户
    placeholder:
      en_US: "postgres"
      zh_Hans: "postgres"
  vector_db_password:
    type: secret-input
    required: true
    label:
      en_US: Database Password
      zh_Hans: 数据库密码
  vector_db_sslmode:
    type: text-input
    required: false
    default: "disable"
    label:
      en_US: Database SSL Mode
      zh_Hans: 数据库 SSL 模式
    placeholder:
      en_US: "disable, require, prefer"
      zh_Hans: "disable, require, prefer"
  
  # ========== Graph Database Configuration (Optional) ==========
  graph_db_provider:
    type: text-input
    required: false
    label:
      en_US: Graph Database Provider (Optional)
      zh_Hans: 图数据库提供商（可选）
    placeholder:
      en_US: "e.g., neo4j"
      zh_Hans: "例如：neo4j"
    help:
      en_US: "Optional. Leave empty if not using graph database."
      zh_Hans: "可选。如果不使用图数据库，可留空。"
  graph_db_url:
    type: text-input
    required: false
    label:
      en_US: Graph Database URL
      zh_Hans: 图数据库 URL
    placeholder:
      en_US: "e.g., bolt://localhost:7687 or neo4j+s://your-instance.databases.neo4j.io"
      zh_Hans: "例如：bolt://localhost:7687 或 neo4j+s://your-instance.databases.neo4j.io"
    help:
      en_US: "Only required when Graph Database Provider is configured."
      zh_Hans: "仅在配置了图数据库提供商时需要。"
  graph_db_username:
    type: text-input
    required: false
    label:
      en_US: Graph Database Username
      zh_Hans: 图数据库用户名
    help:
      en_US: "Only required when Graph Database Provider is configured."
      zh_Hans: "仅在配置了图数据库提供商时需要。"
  graph_db_password:
    type: secret-input
    required: false
    label:
      en_US: Graph Database Password
      zh_Hans: 图数据库密码
    help:
      en_US: "Only required when Graph Database Provider is configured."
      zh_Hans: "仅在配置了图数据库提供商时需要。"
  graph_db_database:
    type: text-input
    required: false
    default: "neo4j"
    label:
      en_US: Graph Database Name
      zh_Hans: 图数据库名称
    help:
      en_US: "Only required when Graph Database Provider is configured. Default: neo4j"
      zh_Hans: "仅在配置了图数据库提供商时需要。默认值：neo4j"
  
  # ========== Reranker Configuration (Optional) ==========
  reranker_provider:
    type: text-input
    required: false
    label:
      en_US: Reranker Provider (Optional)
      zh_Hans: 重排序模型提供商（可选）
    placeholder:
      en_US: "e.g., cohere, huggingface"
      zh_Hans: "例如：cohere, huggingface"
    help:
      en_US: "Optional. Leave empty if not using reranker."
      zh_Hans: "可选。如果不使用重排序模型，可留空。"
  reranker_model:
    type: text-input
    required: false
    label:
      en_US: Reranker Model
      zh_Hans: 重排序模型
    placeholder:
      en_US: "e.g., rerank-english-v3.0, BAAI/bge-reranker-v2-m3"
      zh_Hans: "例如：rerank-english-v3.0, BAAI/bge-reranker-v2-m3"
    help:
      en_US: "Only required when Reranker Provider is configured."
      zh_Hans: "仅在配置了重排序模型提供商时需要。"
  reranker_api_key:
    type: secret-input
    required: false
    label:
      en_US: Reranker API Key
      zh_Hans: 重排序模型 API 密钥
    help:
      en_US: "Required when Reranker Provider is 'cohere'. Not needed for 'huggingface'."
      zh_Hans: "当重排序模型提供商为 'cohere' 时需要。'huggingface' 不需要。"
  reranker_top_k:
    type: text-input
    required: false
    default: "5"
    label:
      en_US: Reranker Top K
      zh_Hans: 重排序 Top K
    help:
      en_US: "Only required when Reranker Provider is configured. Default: 5"
      zh_Hans: "仅在配置了重排序模型提供商时需要。默认值：5"
  max_concurrent_memory_operations:
    type: text-input
    required: false
    default: "40"
    label:
      en_US: Max Concurrent Memory Operations
      zh_Hans: 最大并发记忆操作数
    help:
      en_US: "Maximum number of concurrent async Mem0 operations per process (search/add/get/get_all/update/delete/delete_all/history). For production environments, it is recommended to set this value greater than 20. If not configured, the default value 40 is used."
      zh_Hans: "每个进程允许的 Mem0 异步记忆操作最大并发数（包含 search/add/get/get_all/update/delete/delete_all/history 等所有操作）。生产环境建议大于 20；如果未配置，则使用默认值 40。"
  pgvector_min_connections:
    type: text-input
    required: false
    default: "10"
    label:
      en_US: PGVector Min Connections
      zh_Hans: PGVector 最小连接数
    help:
      en_US: "Minimum number of connections in the PGVector connection pool. If not configured, the default value 10 is used."
      zh_Hans: "PGVector 连接池中的最小连接数。如果未配置，则使用默认值 10。"
  pgvector_max_connections:
    type: text-input
    required: false
    default: "40"
    label:
      en_US: PGVector Max Connections
      zh_Hans: PGVector 最大连接数
    help:
      en_US: "Maximum number of connections in the PGVector connection pool. It is recommended to keep this value consistent with max_concurrent_memory_operations in production environments. If not configured, the default value 40 is used."
      zh_Hans: "PGVector 连接池中的最大连接数。生产环境中建议与 max_concurrent_memory_operations 保持一致。如果未配置，则使用默认值 40。"

tools:
  - tools/add_memory.yaml
  - tools/search_memory.yaml
  - tools/get_all_memories.yaml
  - tools/get_memory.yaml
  - tools/update_memory.yaml
  - tools/delete_memory.yaml
  - tools/delete_all_memories.yaml
  - tools/get_memory_history.yaml
extra:
  python:
    source: provider/mem0ai.py
